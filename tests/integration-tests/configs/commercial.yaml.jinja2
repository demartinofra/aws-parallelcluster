{%- import 'common.jinja2' as common -%}
---
test-suites:
  cfn-init:
    test_cfn_init.py::test_replace_compute_on_failure:
      dimensions:
        - regions:
            - {{ common.REGIONS_COMMERCIAL|random }}
          instances:
            - {{ common.INSTANCES_COMMERCIAL|random }}
          oss: {{ common.OSS_COMMERCIAL }}
          schedulers:
            - {{ common.SCHEDULERS_TRAD|random }}
  efa:
    test_efa.py::test_efa:
      dimensions:
        - regions:
            - {{ common.REGIONS_COMMERCIAL|random }}
          instances: {{ common.INSTANCES_EFA }}
          oss:
            - alinux
            - centos7
            - ubuntu1604
          schedulers:
            - sge
            - slurm
  intel_hpc:
    test_intel_hpc.py::test_intel_hpc:
      dimensions:
        - regions:
            - {{ common.REGIONS_COMMERCIAL|random }}
          instances:
            - c5n.18xlarge
          oss:
            - centos7
          schedulers:
            - sge
  networking:
    test_networking.py::test_public_network_topology:
      dimensions:
        - regions:
            - {{ common.REGIONS_COMMERCIAL|random }}
          instances:
            -
          oss:
            -
          schedulers:
            -
    test_networking.py::test_public_private_network_topology:
      dimensions:
        - regions:
            - {{ common.REGIONS_COMMERCIAL|random }}
          instances:
            -
          oss:
            -
          schedulers:
            -
  scaling:
    test_scaling.py::test_multiple_jobs_submission:
      dimensions:
        - regions: {{ common.REGIONS_COMMERCIAL }}
          instances: {{ common.INSTANCES_COMMERCIAL }}
          oss: {{ common.OSS_COMMERCIAL }}
          schedulers: {{ common.SCHEDULERS_TRAD }}
    test_scaling.py::test_nodewatcher_terminates_failing_node:
      dimensions:
        - regions:
            - {{ common.REGIONS_COMMERCIAL|random }}
          instances:
            - {{ common.INSTANCES_COMMERCIAL|random }}
          oss: {{ common.OSS_COMMERCIAL }}
          schedulers: {{ common.SCHEDULERS_TRAD }}
    test_mpi.py::test_mpi:
      dimensions:
        - regions:
            - {{ common.REGIONS_COMMERCIAL|random }}
          instances:
            - {{ common.INSTANCES_COMMERCIAL|random }}
            - {{ common.INSTANCES_EFA|random }}
          oss: {{ common.OSS_COMMERCIAL }}
          schedulers:
            - sge
            - slurm
    test_mpi.py::test_mpi_ssh:
      dimensions:
        - regions:
            - {{ common.REGIONS_COMMERCIAL|random }}
          instances:
            - {{ common.INSTANCES_COMMERCIAL|random }}
          oss: {{ common.OSS_COMMERCIAL }}
          schedulers: {{ common.SCHEDULERS_TRAD }}
  schedulers:
    test_awsbatch.py::test_awsbatch:
      dimensions:
        - regions:
            - {{ common.REGIONS_COMMERCIAL|random }}
          instances:
            - {{ common.INSTANCES_COMMERCIAL|random }}
          oss:
            - alinux
          schedulers:
            - awsbatch
    test_sge.py::test_sge:
      dimensions:
        - regions:
            - {{ common.REGIONS_COMMERCIAL|random }}
          instances:
            - {{ common.INSTANCES_COMMERCIAL|random }}
          oss: {{ common.OSS_COMMERCIAL }}
          schedulers:
            - sge
    test_slurm.py::test_slurm:
      dimensions:
        - regions:
            - {{ common.REGIONS_COMMERCIAL|random }}
          instances:
            - {{ common.INSTANCES_COMMERCIAL|random }}
          oss: {{ common.OSS_COMMERCIAL }}
          schedulers:
            - slurm
    test_torque.py::test_torque:
      dimensions:
        - regions:
            - {{ common.REGIONS_COMMERCIAL|random }}
          instances:
            - {{ common.INSTANCES_COMMERCIAL|random }}
          oss: {{ common.OSS_COMMERCIAL }}
          schedulers:
            - torque
  storage:
    test_ebs.py::test_ebs_single:
      dimensions:
        - regions:
            - {{ common.REGIONS_COMMERCIAL|random }}
          instances:
            - {{ common.INSTANCES_COMMERCIAL|random }}
          oss: {{ common.OSS_COMMERCIAL }}
          schedulers:
            - {{ common.SCHEDULERS_TRAD|random }}
            - awsbatch
    test_ebs.py::test_ebs_multiple:
      dimensions:
        - regions:
            - {{ common.REGIONS_COMMERCIAL|random }}
          instances:
            - {{ common.INSTANCES_COMMERCIAL|random }}
          oss: {{ common.OSS_COMMERCIAL }}
          schedulers:
            - {{ common.SCHEDULERS_TRAD|random }}
            - awsbatch
    test_ebs.py::test_default_ebs:
      dimensions:
        - regions:
            - {{ common.REGIONS_COMMERCIAL|random }}
          instances:
            - {{ common.INSTANCES_COMMERCIAL|random }}
          oss: {{ common.OSS_COMMERCIAL }}
          schedulers:
            - {{ common.SCHEDULERS_TRAD|random }}
            - awsbatch
    test_fsx_lustre.py::test_fsx_lustre:
      dimensions:
        - regions:
            - {{ common.REGIONS_COMMERCIAL|random }}
          instances:
            - {{ common.INSTANCES_COMMERCIAL|random }}
          oss:
            - centos7
            - alinux
          schedulers:
            - sge
    test_raid.py::test_raid_performance_mode:
      dimensions:
        - regions:
            - {{ common.REGIONS_COMMERCIAL|random }}
          instances:
            - {{ common.INSTANCES_COMMERCIAL|random }}
          oss: {{ common.OSS_COMMERCIAL }}
          schedulers:
            - {{ common.SCHEDULERS_TRAD|random }}
            - awsbatch
    test_raid.py::test_raid_fault_tolerance_mode:
      dimensions:
        - regions:
            - {{ common.REGIONS_COMMERCIAL|random }}
          instances:
            - {{ common.INSTANCES_COMMERCIAL|random }}
          oss: {{ common.OSS_COMMERCIAL }}
          schedulers:
            - {{ common.SCHEDULERS_TRAD|random }}
            - awsbatch
  update:
    test_update.py::test_update:
      dimensions:
        - regions:
            - {{ common.REGIONS_COMMERCIAL|random }}
          instances:
            - {{ common.INSTANCES_COMMERCIAL|random }}
          oss:
            - {{ common.OSS_COMMERCIAL|random }}
          schedulers:
            - {{ common.SCHEDULERS_TRAD|random }}
